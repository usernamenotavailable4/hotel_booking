<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>YOYO Hotels — Register</title>

    <style>
        :root {
            --bg: #1a0f24;
            --accent: #7f5bff;
            --muted: rgba(255, 255, 255, 0.75);
            --glass: rgba(255, 255, 255, 0.06);
            --max-width: 980px;
            --radius: 14px;
            font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
        }

        html,
        body {
            height: 100%;
        }

        body {
            margin: 0;
            padding: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #1a0f24;
            color: #e6eef8;
            box-sizing: border-box;

            /* Purple animated doodle background */
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='600' height='600' viewBox='0 0 600 600'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:none;stroke:%238e73ff;stroke-opacity:0.32;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;%7D.cls-2%7Bfill:%237f5bff;fill-opacity:0.12;%7D%3C/style%3E%3C/defs%3E%3Crect class='cls-2' width='600' height='600'/%3E%3Cg transform='translate(20 20)'%3E%3Cg transform='scale(0.9)'%3E%3Cpath class='cls-1' d='M40 100 L40 60 L80 40 L120 60 L120 100 Z'/%3E%3Cpath class='cls-1' d='M50 100 L50 140 L110 140 L110 100'/%3E%3Ccircle class='cls-1' cx='80' cy='72' r='6'/%3E%3Cpath class='cls-1' d='M200 200 L200 150 L260 120 L320 150 L320 200 Z'/%3E%3Cpath class='cls-1' d='M220 200 L220 250 L300 250 L300 200'/%3E%3Cpath class='cls-1' d='M400 120 L400 80 L440 60 L480 80 L480 120 Z'/%3E%3Cpath class='cls-1' d='M420 120 L420 170 L460 170 L460 120'/%3E%3Cpath class='cls-1' d='M120 300 L120 250 L170 220 L220 250 L220 300 Z'/%3E%3Cpath class='cls-1' d='M140 300 L140 340 L200 340 L200 300'/%3E%3Cpath class='cls-1' d='M330 320 L330 270 L380 240 L430 270 L430 320 Z'/%3E%3Cpath class='cls-1' d='M350 320 L350 360 L410 360 L410 320'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");

            background-size: 480px 480px;
            background-repeat: repeat;
        }

        .wrap {
            width: 100%;
            max-width: var(--max-width);
            display: grid;
            grid-template-columns: 1fr 420px;
            gap: 32px;
            align-items: center;
        }

        /* LEFT SIDE */
        .hero {
            padding: 40px;
            border-radius: var(--radius);
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.02), rgba(255, 255, 255, 0.012));
            backdrop-filter: blur(14px) saturate(200%);
            box-shadow: 0 10px 30px rgba(2, 6, 23, 0.6);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px
        }

        .badge {
            width: 56px;
            height: 56px;
            border-radius: 12px;
            background: linear-gradient(135deg, var(--accent), #ffb37b);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            font-size: 20px;
            font-weight: 700;
        }

        h1 {
            margin: 0;
            font-size: 28px
        }

        /* RIGHT CARD */
        .card {
            padding: 28px;
            border-radius: 16px;
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.025), rgba(255, 255, 255, 0.015));
            backdrop-filter: blur(20px) saturate(220%);
            box-shadow: 0 8px 30px rgba(2, 6, 23, 0.6);
        }

        form {
            display: flex;
            flex-direction: column;
            gap: 14px
        }

        label {
            font-size: 13px;
            color: var(--muted)
        }

        .field {
            display: flex;
            flex-direction: column
        }

        input[type=text],
        input[type=password],
        input[type=email] {
            padding: 12px 14px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.06);
            background: transparent;
            color: white;
            outline: none;
            font-size: 15px;
            transition: border .15s, box-shadow .2s;
        }

        input::placeholder {
            color: rgba(255, 255, 255, 0.35)
        }

        input:focus {
            border-color: rgba(255, 255, 255, 0.15);
            box-shadow: 0 6px 20px rgba(2, 6, 23, 0.5);
        }

        button.btn {
            padding: 12px 14px;
            border-radius: 12px;
            border: 0;
            background: linear-gradient(90deg, var(--accent), #ffb37b);
            color: white;
            font-weight: 600;
            font-size: 15px;
            box-shadow: 0 8px 28px rgba(255, 107, 107, 0.14);
            cursor: pointer;
        }

        .social {
            display: flex;
            gap: 10px;
            margin-top: 6px
        }

        .s-btn {
            padding: 10px 12px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.06);
            background: transparent;
            color: var(--muted);
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
        }

        .footer {
            text-align: center;
            color: var(--muted);
            margin-top: 18px
        }

        .link {
            color: white;
            font-weight: 600;
            text-decoration: none
        }

        @media(max-width:980px) {
            .wrap {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>
    <div class="wrap">

        <!-- LEFT SIDE -->
        <section class="hero">
            <div class="logo">
                <div class="badge">YY</div>
                <div>
                    <div style="font-size:12px;color:var(--muted)">YOYO HOTELS</div>
                    <div style="font-weight:700;font-size:14px">Join our travel family</div>
                </div>
            </div>
            <h1>Create your YOYO account</h1>
            <p style="color:var(--muted);margin-top:10px;">
                Register to explore exclusive hotel deals, save searches,
                and enjoy a smooth travel booking experience.
            </p>
        </section>

        <!-- RIGHT SIDE FORM -->
        <aside class="card">
            <h2 style="color:white;margin:0 0 8px;">Register</h2>

            <form id="regForm" onsubmit="return registerUser(event)">

                <div class="field">
                    <label for="username">Username</label>
                    <input id="username" name="username" type="text" placeholder="your_username" required />
                </div>

                <div class="field">
                    <label for="first_name">First Name</label>
                    <input id="first_name" name="first_name" type="text" placeholder="John" required />
                </div>

                <div class="field">
                    <label for="last_name">Last Name</label>
                    <input id="last_name" name="last_name" type="text" placeholder="Doe" required />
                </div>

                <div class="field">
                    <label for="email">Email</label>
                    <input id="email" name="email" type="email" placeholder="you@example.com" required />
                </div>

                <div class="field">
                    <label for="password">Password</label>
                    <input id="password" name="password" type="password" placeholder="Minimum 6 characters" required
                        minlength="6" />
                </div>

                <button class="btn" type="submit">Create Account</button>

                <div class="social">
                    <button type="button" class="s-btn" onclick="social('google')">Google</button>
                    <button type="button" class="s-btn" onclick="social('apple')">Apple</button>
                </div>

                <div class="footer">
                    Already have an account?
                    <a class="link" href="{% url 'login' %}">Sign in →</a>
                </div>
            </form>

        </aside>
    </div>

    <script>
        // Get CSRF token from cookies
        function getCookie(name) {
            let cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                const cookies = document.cookie.split(';');
                for (let i = 0; i < cookies.length; i++) {
                    const cookie = cookies[i].trim();
                    if (cookie.substring(0, name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }

        async function registerUser(e) {
            e.preventDefault();

            const username = document.getElementById("username").value.trim();
            const first_name = document.getElementById("first_name").value.trim();
            const last_name = document.getElementById("last_name").value.trim();
            const email = document.getElementById("email").value.trim();
            const password = document.getElementById("password").value;

            if (!username || !first_name || !last_name || !email || !password) {
                alert("Please fill all fields");
                return false;
            }

            if (password.length < 6) {
                alert("Password must be at least 6 characters");
                return false;
            }

            try {
                const csrftoken = getCookie('csrftoken');

                const response = await fetch('/api/register/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-CSRFToken': csrftoken
                    },
                    body: JSON.stringify({
                        "username": username,
                        "first_name": first_name,
                        "last_name": last_name,
                        "email": email,
                        "password": password
                    })
                });

                const data = await response.json();

                if (response.ok) {
                    alert("Registration successful! Redirecting to login...");
                    window.location.href = "/login/";
                } else {
                    alert(data.error || "Registration failed. Please try again.");
                }
            } catch (error) {
                console.error("Error:", error);
                alert("An error occurred. Please try again.");
            }

            return false;
        }

        function social(provider) {
            alert("Continue with " + provider + " — link your OAuth here.");
        }
    </script>


</body>

</html>